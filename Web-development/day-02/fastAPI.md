# üìò FastAPI: –í—ñ–¥ –Ω—É–ª—è –¥–æ –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª–∞

## –ó–º—ñ—Å—Ç

1. [–ì–ª–∞–≤–∞ 1: –í—Å—Ç—É–ø —É FastAPI](#-–≥–ª–∞–≤–∞-1-–≤—Å—Ç—É–ø-—É-fastapi)
2. [–ì–ª–∞–≤–∞ 2: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä—à–∏–π –ø—Ä–æ—î–∫—Ç FastAPI](#-–≥–ª–∞–≤–∞-2-–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-—Ç–∞-–ø–µ—Ä—à–∏–π-–ø—Ä–æ—î–∫—Ç-fastapi)
3. [–ì–ª–∞–≤–∞ 3: –û—Å–Ω–æ–≤–∏ FastAPI ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ](#-–≥–ª–∞–≤–∞-3-–æ—Å–Ω–æ–≤–∏-fastapi--–º–∞—Ä—à—Ä—É—Ç–∏-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ)
4. [–ì–ª–∞–≤–∞ 4: –¢–∏–ø—ñ–∑–∞—Ü—ñ—è, Pydantic —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∞–Ω–∏—Ö](#-–≥–ª–∞–≤–∞-4-—Ç–∏–ø—ñ–∑–∞—Ü—ñ—è-pydantic-—ñ-–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞-–¥–∞–Ω–∏—Ö)
5. [–ì–ª–∞–≤–∞ 5: –®–∞–±–ª–æ–Ω–∏ (Jinja2) —Ç–∞ HTML-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É FastAPI](#-–≥–ª–∞–≤–∞-5-—à–∞–±–ª–æ–Ω–∏-jinja2-—Ç–∞-html-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å-—É-fastapi)
6. [–ì–ª–∞–≤–∞ 6: –†–æ–±–æ—Ç–∞ –∑ —Ñ–æ—Ä–º–∞–º–∏ —Ç–∞ –æ–±—Ä–æ–±–∫–∞ POST-–∑–∞–ø–∏—Ç—ñ–≤](#-–≥–ª–∞–≤–∞-6-—Ä–æ–±–æ—Ç–∞-–∑-—Ñ–æ—Ä–º–∞–º–∏-—Ç–∞-–æ–±—Ä–æ–±–∫–∞-post-–∑–∞–ø–∏—Ç—ñ–≤)
7. [–ì–ª–∞–≤–∞ 7: –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (SQLite + SQLModel)](#-–≥–ª–∞–≤–∞-7-—Ä–æ–±–æ—Ç–∞-–∑-–±–∞–∑–æ—é-–¥–∞–Ω–∏—Ö-sqlite--sqlmodel)
8. [–ì–ª–∞–≤–∞ 8: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å, Background Tasks —Ç–∞ WebSocket —É FastAPI](#-–≥–ª–∞–≤–∞-8-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å-background-tasks-—Ç–∞-websocket-—É-fastapi)
9. [–ì–ª–∞–≤–∞ 9: –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —ñ –±–µ–∑–ø–µ–∫–∞ (OAuth2 + JWT)](#-–≥–ª–∞–≤–∞-9-–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è-—ñ-–±–µ–∑–ø–µ–∫–∞-oauth2--jwt)
10. [–ì–ª–∞–≤–∞ 10: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è FastAPI –¥–æ–¥–∞—Ç–∫—ñ–≤](#-–≥–ª–∞–≤–∞-10-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è-fastapi-–¥–æ–¥–∞—Ç–∫—ñ–≤)
11. [–ì–ª–∞–≤–∞ 11: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è FastAPI –¥–æ–¥–∞—Ç–∫—ñ–≤ (Docker, Heroku, AWS)](#-–≥–ª–∞–≤–∞-11-—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è-fastapi-–¥–æ–¥–∞—Ç–∫—ñ–≤-docker-heroku-aws)
12. [–ì–ª–∞–≤–∞ 12: –ü–æ—Ä–∞–¥–∏ —Ç–∞ —Ä–µ—Å—É—Ä—Å–∏ –¥–ª—è –≤–∏–≤—á–µ–Ω–Ω—è FastAPI](#-–≥–ª–∞–≤–∞-12-–ø–æ—Ä–∞–¥–∏-—Ç–∞-—Ä–µ—Å—É—Ä—Å–∏-–¥–ª—è-–≤–∏–≤—á–µ–Ω–Ω—è-fastapi)

---

## üîπ –ì–ª–∞–≤–∞ 1: –í—Å—Ç—É–ø —É FastAPI

### –©–æ —Ç–∞–∫–µ FastAPI?

**FastAPI** ‚Äî —Ü–µ —Å—É—á–∞—Å–Ω–∏–π, —à–≤–∏–¥–∫–∏–π (–≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–π) –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è API –∑ Python 3.7+ –Ω–∞ –æ—Å–Ω–æ–≤—ñ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç—É OpenAPI** —Ç–∞ **—Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó**.

* –ü–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ **Starlette** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫) —ñ **Pydantic** (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö).
* –û—Å–Ω–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞ ‚Äî –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ **async/await**, **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**, **–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤**, —Ç–∞ **–≤–∏—Å–æ–∫–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å**.

### –ü–µ—Ä–µ–≤–∞–≥–∏ FastAPI:

* üöÄ –®–≤–∏–¥–∫–∏–π, —è–∫ Node.js –∞–±–æ Go.
* üß† –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ —É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ (–∑–∞–≤–¥—è–∫–∏ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó).
* üìÑ –ì–µ–Ω–µ—Ä—É—î Swagger —ñ ReDoc –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
* ‚öôÔ∏è –ü—Ä–æ—Å—Ç–∏–π —É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ, –∞–ª–µ –ø–æ—Ç—É–∂–Ω–∏–π.

### –î–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è FastAPI?

* API –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤ —Ç–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
* –°–µ—Ä–≤—ñ—Å–∏ –∑ –º–∞—à–∏–Ω–Ω–∏–º –Ω–∞–≤—á–∞–Ω–Ω—è–º
* Telegram-–±–æ—Ç–∏
* Backend –¥–ª—è SPA (Vue, React)
* –ú—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–∏

---

## üîß –©–æ —Ç—Ä–µ–±–∞ –∑–Ω–∞—Ç–∏ –ø–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º

FastAPI ‚Äî —Ü–µ –ø—Ä–æ Python + –≤–µ–±. –¢–æ–∂ –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç—É –±–∞–∂–∞–Ω–æ –º–∞—Ç–∏ –∑–Ω–∞–Ω–Ω—è:

* Python: –∑–º—ñ–Ω–Ω—ñ, —Ñ—É–Ω–∫—Ü—ñ—ó, —Å–ª–æ–≤–Ω–∏–∫–∏, —Å–ø–∏—Å–∫–∏
* –û—Å–Ω–æ–≤–∏ HTTP (GET, POST, —Å—Ç–∞—Ç—É—Å–∏)
* –†–æ–∑—É–º—ñ–Ω–Ω—è JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

## üîπ –ì–ª–∞–≤–∞ 2: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä—à–∏–π –ø—Ä–æ—î–∫—Ç FastAPI

### üõ†Ô∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

–î–ª—è –ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ FastAPI —Ç–∞ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫—É **Uvicorn**.

> üîî –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —É –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ (virtualenv –∞–±–æ venv)

#### 1. –°—Ç–≤–æ—Ä–∏ –Ω–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç:

```bash
mkdir fastapi_project
cd fastapi_project
python -m venv venv
source venv/bin/activate  # –∞–±–æ venv\Scripts\activate –Ω–∞ Windows
```

#### 2. –í—Å—Ç–∞–Ω–æ–≤–∏ FastAPI —Ç–∞ Uvicorn:

```bash
pip install fastapi uvicorn
```

> FastAPI ‚Äî —Ü–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
> Uvicorn ‚Äî ASGI-—Å–µ—Ä–≤–µ—Ä, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î –¥–æ–¥–∞—Ç–æ–∫

---

### üìù –°—Ç–≤–æ—Ä–∏ –ø–µ—Ä—à–∏–π —Ñ–∞–π–ª `main.py`

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "–ü—Ä–∏–≤—ñ—Ç, FastAPI!"}
```

* `@app.get("/")` ‚Äî –æ–∑–Ω–∞—á–∞—î: –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–π –Ω–∞ GET-–∑–∞–ø–∏—Ç–∏ –¥–æ –∫–æ—Ä–µ–Ω–µ–≤–æ–≥–æ —à–ª—è—Ö—É `/`.
* `read_root()` ‚Äî —Ñ—É–Ω–∫—Ü—ñ—è-–æ–±—Ä–æ–±–Ω–∏–∫.
* `return` ‚Äî –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î JSON-—Å–ª–æ–≤–Ω–∏–∫–æ–º.

---

### üöÄ –ó–∞–ø—É—Å–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

```bash
uvicorn main:app --reload
```

* `main` ‚Äî –Ω–∞–∑–≤–∞ Python-—Ñ–∞–π–ª—É (`main.py`)
* `app` ‚Äî —ñ–º‚Äô—è –æ–±‚Äô—î–∫—Ç–∞ FastAPI
* `--reload` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–¥—É

---

### üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

* –í—ñ–¥–∫—Ä–∏–π: [http://127.0.0.1:8000](http://127.0.0.1:8000) ‚Üí –ø–æ–±–∞—á–∏—à: `{"message": "–ü—Ä–∏–≤—ñ—Ç, FastAPI!"}`
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:

  * Swagger UI: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
  * ReDoc: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

---

### ‚úÖ –ü—ñ–¥—Å—É–º–æ–∫

* FastAPI –¥—É–∂–µ –ª–µ–≥–∫–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è.
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
* –í—Å–µ –ø—Ä–∞—Ü—é—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Ç–∞ —à–≤–∏–¥–∫–æ.

–û–∫–µ–π, —Ä—É—à–∞—î–º–æ –¥–∞–ª—ñ!

---

## üîπ –ì–ª–∞–≤–∞ 3: –û—Å–Ω–æ–≤–∏ FastAPI ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

FastAPI –¥–æ–∑–≤–æ–ª—è—î –¥—É–∂–µ –≥–Ω—É—á–∫–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ (routes), –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –∑–∞–ø–∏—Ç–∞–º–∏ –π –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏.

---

### üìç 1. –ú–∞—Ä—à—Ä—É—Ç–∏ (Routes)

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def home():
    return {"msg": "–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞"}

@app.get("/about")
def about():
    return {"msg": "–ü—Ä–æ —Å–∞–π—Ç"}
```
### –ú–∞—Ä—à—Ä—É—Ç–∏ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å, —è–∫ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∑–∞–ø–∏—Ç–∏ –¥–æ —Ä—ñ–∑–Ω–∏—Ö URL.

* `@app.get(...)` ‚Äî **GET-–∑–∞–ø–∏—Ç**  
  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (—á–∏—Ç–∞–Ω–Ω—è). –ù–µ –∑–º—ñ–Ω—é—î —Å—Ç–∞–Ω —Å–µ—Ä–≤–µ—Ä–∞.  
  _–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤._

* `@app.post(...)` ‚Äî **POST-–∑–∞–ø–∏—Ç**  
  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.  
  _–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞._

* `@app.put(...)` ‚Äî **PUT-–∑–∞–ø–∏—Ç**  
  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö –¥–∞–Ω–∏—Ö.  
  _–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ø–æ–≤–Ω—ñ—Å—Ç—é –æ–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞._

* `@app.delete(...)` ‚Äî **DELETE-–∑–∞–ø–∏—Ç**  
  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.  
  _–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞._

* `@app.patch(...)` ‚Äî **PATCH-–∑–∞–ø–∏—Ç**  
  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —á–∞—Å—Ç–∫–æ–≤–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.  
  _–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –∑–º—ñ–Ω–∏—Ç–∏ –ª–∏—à–µ email –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞._

* `@app.options(...)` ‚Äî **OPTIONS-–∑–∞–ø–∏—Ç**  
  –ü–æ–≤–µ—Ä—Ç–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Å–µ—Ä–≤–µ—Ä–æ–º –º–µ—Ç–æ–¥–∏ –¥–ª—è –ø–µ–≤–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É.

* `@app.head(...)` ‚Äî **HEAD-–∑–∞–ø–∏—Ç**  
  –Ø–∫ GET, –∞–ª–µ –ø–æ–≤–µ—Ä—Ç–∞—î –ª–∏—à–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –±–µ–∑ —Ç—ñ–ª–∞.

> –ù–∞–π—á–∞—Å—Ç—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è: **GET**, **POST**, **PUT**, **DELETE**, **PATCH**.

---

### üî¢ 2. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ URL (Path Parameters)
**–î–ª—è —á–æ–≥–æ:**  
–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ URL (path parameters) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è, –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É –∑–∞ –π–æ–≥–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–æ–º –∞–±–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º.  
_–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –ø–µ–≤–Ω–∏–º user_id._

```python
@app.get("/user/{user_id}")
def get_user(user_id: int):
    return {"user_id": user_id}
```

* `{user_id}` ‚Äî –∑–º—ñ–Ω–Ω–∞ –≤ URL
* `user_id: int` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—É

> –Ø–∫—â–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ `/user/abc`, –±—É–¥–µ 422 Unprocessable Entity.

---

### ‚ùì 3. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (Query Parameters)
**–î–ª—è —á–æ–≥–æ:**  
–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (query parameters) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó, –ø–æ—à—É–∫—É, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó –∞–±–æ –ø–µ—Ä–µ–¥–∞—á—ñ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –æ–ø—Ü—ñ–π —É –∑–∞–ø–∏—Ç—ñ. –í–æ–Ω–∏ –Ω–µ —î —á–∞—Å—Ç–∏–Ω–æ—é —à–ª—è—Ö—É, –∞ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –ø—ñ—Å–ª—è –∑–Ω–∞–∫—É `?` —É URL.

```python
@app.get("/search")
def search(q: str = ""):
    return {"query": q}
```

* `/search?q=hello` ‚Üí `{"query": "hello"}`

–ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –∫—ñ–ª—å–∫–∞:

```python
@app.get("/filter")
def filter_items(skip: int = 0, limit: int = 10):
    return {"skip": skip, "limit": limit}
```

‚Üí `/filter?skip=5&limit=20`

---

### ‚úÖ 4. –ö–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ Response

**–î–ª—è —á–æ–≥–æ:**  
–ö–æ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ HTTP (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 200, 201, 404) –ø–æ–∫–∞–∑—É—î –∫–ª—ñ—î–Ω—Ç—É, —è–∫ –∑–∞–≤–µ—Ä—à–∏–≤—Å—è –∑–∞–ø–∏—Ç: —É—Å–ø—ñ—à–Ω–æ, –∑ –ø–æ–º–∏–ª–∫–æ—é —á–∏ –∑ —ñ–Ω—à–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.  
FastAPI –¥–æ–∑–≤–æ–ª—è—î —è–≤–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ –∫–æ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç—É, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ API –∑—Ä–æ–∑—É–º—ñ–ª—ñ—à–∏–º —ñ –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ —Ä—ñ–∑–Ω—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó.

**–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏:**  
–£ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ñ –º–∞—Ä—à—Ä—É—Ç—É –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `status_code`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É –∑–∞–∑–≤–∏—á–∞–π –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –∫–æ–¥ 201 (Created):

```python
from fastapi import status

@app.post("/create", status_code=status.HTTP_201_CREATED)
def create_item():
    return {"message": "–°—Ç–≤–æ—Ä–µ–Ω–æ!"}
```
* `status_code=status.HTTP_201_CREATED` ‚Äî —è–≤–Ω–æ –≤–∫–∞–∑—É—î, —â–æ –ø—Ä–∏ —É—Å–ø—ñ—à–Ω–æ–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –∫–æ–¥ 201.
* –ú–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π —ñ–Ω—à—ñ –∫–æ–¥–∏: 200 (OK), 204 (No Content), 400 (Bad Request), 404 (Not Found) —Ç–æ—â–æ.

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ö–ª—ñ—î–Ω—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥) –º–æ–∂–µ –ª–µ–≥–∫–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Ç—É –ø–æ –∫–æ–¥—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.
- –¶–µ –ø—ñ–¥–≤–∏—â—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü—ñ—é —Ç–∞ –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—Å—Ç—å API.
- –í—Å—ñ –∫–æ–¥–∏ –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —É –º–æ–¥—É–ª—ñ `fastapi.status`.

---

### üí° 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è

FastAPI —Å–∞–º —á–∏—Ç–∞—î —Å–∏–≥–Ω–∞—Ç—É—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ–π, —Ç–∏–ø–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —ñ –≥–µ–Ω–µ—Ä—É—î –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é.

**–©–æ —Ü–µ –æ–∑–Ω–∞—á–∞—î:**  
- –í—Å—ñ –≤–∞—à—ñ –º–∞—Ä—à—Ä—É—Ç–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —Ç–∏–ø–∏ —Ç–∞ –∫–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —É Swagger UI (`/docs`) —Ç–∞ ReDoc (`/redoc`).
- –¶–µ –¥—É–∂–µ –∑—Ä—É—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó ‚Äî –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–∏—Å–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤—Ä—É—á–Ω—É.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–¥—É.

> **–ü–æ—Ä–∞–¥–∞:** –ó–∞–≤–∂–¥–∏ –≤–∫–∞–∑—É–π—Ç–µ –∫–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –¥–ª—è –≤–∞–∂–ª–∏–≤–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ ‚Äî —Ü–µ –¥–æ–ø–æ–º–æ–∂–µ —ñ –≤–∞–º, —ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º API!

### üß™ 6. –ø—Ä–∞–∫—Ç–∏–∫–∞

1. –î–æ–¥–∞–π –º–∞—Ä—à—Ä—É—Ç `/hello/{name}`, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º–µ `–ü—Ä–∏–≤—ñ—Ç, {name}`.
2. –°—Ç–≤–æ—Ä–∏ –º–∞—Ä—à—Ä—É—Ç `/calc?a=1&b=2`, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º–µ —Å—É–º—É `a + b`.
3. –ó—Ä–æ–±–∏ POST-–∑–∞–ø–∏—Ç `/submit` –∑ –∫–æ–¥–æ–º 201.

–ß—É–¥–æ–≤–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞–π–ø–æ—Ç—É–∂–Ω—ñ—à–æ—ó —Ñ—ñ—à–∫–∏ FastAPI ‚Äî **Pydantic**.

---

## üîπ –ì–ª–∞–≤–∞ 4: –¢–∏–ø—ñ–∑–∞—Ü—ñ—è, Pydantic —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∞–Ω–∏—Ö

### üì¶ –©–æ —Ç–∞–∫–µ Pydantic?

**Pydantic** ‚Äî —Ü–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–∞–Ω–∏—Ö —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó, —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î FastAPI. –í–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î:

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Ç–∏–ø–∏;
* –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑—ñ —Å–∫–ª–∞–¥–Ω–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ (–≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ —Å–ª–æ–≤–Ω–∏–∫–∞–º–∏, —Å–ø–∏—Å–∫–∞–º–∏);
* —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –Ω–∞ –ª—å–æ—Ç—É.

---

### üß± 1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Pydantic-–º–æ–¥–µ–ª—ñ

```python
from pydantic import BaseModel

class Item(BaseModel):
    name: str
    price: float
    in_stock: bool = True
```

> –ö–æ–∂–Ω–µ –ø–æ–ª–µ: `–Ω–∞–∑–≤–∞: —Ç–∏–ø = [–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º]`

---

### üì¨ 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ –≤ POST-–∑–∞–ø–∏—Ç–∞—Ö

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    price: float
    in_stock: bool = True

@app.post("/items/")
def create_item(item: Item):
    return {"item": item}
```

–ó–∞–ø–∏—Ç:

```json
POST /items/
{
  "name": "–ù–æ—É—Ç–±—É–∫",
  "price": 19999.99,
  "in_stock": false
}
```

–í—ñ–¥–ø–æ–≤—ñ–¥—å:

```json
{
  "item": {
    "name": "–ù–æ—É—Ç–±—É–∫",
    "price": 19999.99,
    "in_stock": false
  }
}
```

---

### üö´ 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è

* –Ø–∫—â–æ –≤–∫–∞–∑–∞—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø (`price: "abc"`), FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–≤–µ—Ä–Ω–µ 422 –∑ –æ–ø–∏—Å–æ–º –ø–æ–º–∏–ª–∫–∏.

---

### üß© 4. –í–∫–ª–∞–¥–µ–Ω—ñ –º–æ–¥–µ–ª—ñ

```python
class User(BaseModel):
    username: str
    email: str

class Order(BaseModel):
    item: Item
    buyer: User
```

---

### üì§ 5. –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑ –º–æ–¥–µ–ª—è–º–∏

```python
@app.get("/item", response_model=Item)
def get_item():
    return {"name": "–ú–∏—à–∫–∞", "price": 499.0, "in_stock": True}
```

> `response_model` –¥–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —ñ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

---

### üìã 6. –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –°—Ç–≤–æ—Ä–∏ –º–æ–¥–µ–ª—å `Book` –∑ –ø–æ–ª—è–º–∏: `title: str`, `author: str`, `pages: int`, `published: bool = False`
2. –î–æ–¥–∞–π POST-—Ä–æ—É—Ç `/books/` –¥–ª—è –ø—Ä–∏–π–æ–º—É –∫–Ω–∏–∂–∫–∏.
3. –î–æ–¥–∞–π GET-—Ä–æ—É—Ç `/book` –∑ `response_model=Book`.

–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ! –ù–∞—Å—Ç–∞–≤ —á–∞—Å –∑—Ä–æ–±–∏—Ç–∏ –Ω–∞—à API –±—ñ–ª—å—à –≤—ñ–∑—É–∞–ª—å–Ω–∏–º üåê

---

## üîπ –ì–ª–∞–≤–∞ 5: –®–∞–±–ª–æ–Ω–∏ (Jinja2) —Ç–∞ HTML-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É FastAPI

FastAPI –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É ‚Äî —Ü–µ API-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∞–ª–µ –π–æ–≥–æ –ª–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è HTML-—Å—Ç–æ—Ä—ñ–Ω–æ–∫, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä **Jinja2**.

---

### üì¶ 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Jinja2

```bash
pip install jinja2
```

> –¢–∞–∫–æ–∂ –¥–æ–¥–∞—Ç–∫–æ–≤–æ –≤—Å—Ç–∞–Ω–æ–≤–∏–º–æ `aiofiles` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–∞–º–∏:

```bash
pip install aiofiles
```

---

### üóÇÔ∏è 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É –∑ —à–∞–±–ª–æ–Ω–∞–º–∏

```
fastapi_project/
‚îÇ
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ templates/
    ‚îî‚îÄ‚îÄ home.html
```

---

### ‚öôÔ∏è 3. –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—ñ–≤ —É FastAPI

```python
from fastapi import FastAPI, Request
from fastapi.responses import HTMLResponse
from fastapi.templating import Jinja2Templates

app = FastAPI()
templates = Jinja2Templates(directory="templates")

@app.get("/", response_class=HTMLResponse)
async def home(request: Request):
    return templates.TemplateResponse("home.html", {"request": request, "title": "FastAPI —Å–∞–π—Ç"})
```

---

### üìù 4. –ü—Ä–∏–∫–ª–∞–¥ —à–∞–±–ª–æ–Ω—É `templates/home.html`

```html
<!DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
</head>
<body>
    <h1>–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ FastAPI!</h1>
    <p>–¶–µ HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∞, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∞ Jinja2.</p>
</body>
</html>
```

> –û–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –æ–±‚Äô—î–∫—Ç `request` —É —à–∞–±–ª–æ–Ω, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à –π–æ–≥–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ.

---

### üß† 5. –ü–µ—Ä–µ–¥–∞—á–∞ –∑–º—ñ–Ω–Ω–∏—Ö —É —à–∞–±–ª–æ–Ω

```python
@app.get("/hello/{name}", response_class=HTMLResponse)
async def greet_user(request: Request, name: str):
    return templates.TemplateResponse("home.html", {
        "request": request,
        "title": f"–ü—Ä–∏–≤—ñ—Ç, {name}",
        "user_name": name
    })
```

–£ —à–∞–±–ª–æ–Ω—ñ:

```html
<h2>–ü—Ä–∏–≤—ñ—Ç, {{ user_name }}!</h2>
```

---

### üìã 6. –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –°—Ç–≤–æ—Ä–∏ —à–∞–±–ª–æ–Ω `user.html`, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —ñ–º‚Äô—è —Ç–∞ –≤–∏–≤–æ–¥–∏—Ç—å ‚Äú–í—ñ—Ç–∞—î–º–æ, {—ñ–º‚Äô—è}‚Äù.
2. –°—Ç–≤–æ—Ä–∏ –º–∞—Ä—à—Ä—É—Ç `/user/{username}`.
3. –ü–µ—Ä–µ–¥–∞–π –∑–º—ñ–Ω–Ω—ñ –≤ —à–∞–±–ª–æ–Ω —ñ –≤—ñ–¥–æ–±—Ä–∞–∑–∏ –≤ HTML.

–ß—É–¥–æ–≤–æ! –¢–µ–ø–µ—Ä –¥–æ–¥–∞–º–æ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å ‚Äî –≤—á–∏–º–æ—Å—è –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ **HTML-—Ñ–æ—Ä–º–∞–º–∏ —Ç–∞ –æ–±—Ä–æ–±–∫–æ—é POST-–∑–∞–ø–∏—Ç—ñ–≤** üìù

---

## üîπ –ì–ª–∞–≤–∞ 6: –†–æ–±–æ—Ç–∞ –∑ —Ñ–æ—Ä–º–∞–º–∏ —Ç–∞ –æ–±—Ä–æ–±–∫–∞ POST-–∑–∞–ø–∏—Ç—ñ–≤

FastAPI –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –¥–∞–Ω—ñ, —è–∫—ñ –ø—Ä–∏—Ö–æ–¥—è—Ç—å —ñ–∑ HTML-—Ñ–æ—Ä–º, —á–µ—Ä–µ–∑ —Ç–∏–ø `Form`.

---

### üì¶ 1. –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

```python
from fastapi import Form
```

---

### üìÑ 2. HTML-—Ñ–æ—Ä–º–∞ —É —à–∞–±–ª–æ–Ω—ñ

```html
<!-- templates/form.html -->
<!DOCTYPE html>
<html>
<head>
    <title>–§–æ—Ä–º–∞</title>
</head>
<body>
    <h2>–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É</h2>
    <form action="/submit" method="post">
        <label for="name">–Ü–º'—è:</label>
        <input type="text" id="name" name="name">
        <br>
        <label for="age">–í—ñ–∫:</label>
        <input type="number" id="age" name="age">
        <br>
        <button type="submit">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </form>
</body>
</html>
```

---

### ‚öôÔ∏è 3. GET-–∑–∞–ø–∏—Ç –¥–ª—è –ø–æ–∫–∞–∑—É —Ñ–æ—Ä–º–∏

```python
from fastapi import Request
from fastapi.templating import Jinja2Templates
from fastapi.responses import HTMLResponse

templates = Jinja2Templates(directory="templates")

@app.get("/form", response_class=HTMLResponse)
async def show_form(request: Request):
    return templates.TemplateResponse("form.html", {"request": request})
```

---

### üì¨ 4. –û–±—Ä–æ–±–∫–∞ POST-–¥–∞–Ω–∏—Ö

```python
from fastapi import Form

@app.post("/submit")
async def handle_form(name: str = Form(...), age: int = Form(...)):
    return {"–Ü–º'—è": name, "–í—ñ–∫": age}
```

> `Form(...)` –æ–∑–Ω–∞—á–∞—î, —â–æ –ø–æ–ª–µ —î –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–º.

---

### üìÑ 5. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ HTML

–ú–æ–∂–Ω–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —à–∞–±–ª–æ–Ω —è–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:

```python
@app.post("/submit", response_class=HTMLResponse)
async def handle_form(request: Request, name: str = Form(...), age: int = Form(...)):
    return templates.TemplateResponse("result.html", {
        "request": request,
        "name": name,
        "age": age
    })
```

`templates/result.html`:

```html
<h1>–†–µ–∑—É–ª—å—Ç–∞—Ç</h1>
<p>–í–∞—à–µ —ñ–º‚Äô—è: {{ name }}</p>
<p>–í–∞—à –≤—ñ–∫: {{ age }}</p>
```

---

### üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –°—Ç–≤–æ—Ä–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É `/feedback`, –¥–µ —î —Ñ–æ—Ä–º–∞ –∑ –ø–æ–ª–µ–º `message`.
2. –ü—Ä–∏ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—ñ –ø–æ–∫–∞–∂–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Äú–î—è–∫—É—î–º–æ –∑–∞ –≤–∞—à –≤—ñ–¥–≥—É–∫: {message}‚Äù.
3. –î–æ–¥–∞–π –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —â–æ–± –ø–æ–ª–µ –Ω–µ –±—É–ª–æ –ø–æ—Ä–æ–∂–Ω—ñ–º (—á–µ—Ä–µ–∑ `Form(...)`).

–ß—É–¥–æ–≤–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ **–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö** ‚Äî —Å—Ç–≤–æ—Ä–∏–º–æ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –±–µ–∫–µ–Ω–¥ üíæ

---

## üîπ –ì–ª–∞–≤–∞ 7: –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (SQLite + SQLModel)

### üîß –©–æ —Ç–∞–∫–µ SQLModel?

**SQLModel** ‚Äî —Ü–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –≤—ñ–¥ –∞–≤—Ç–æ—Ä–∞ FastAPI, —è–∫–∞ –æ–±‚Äô—î–¥–Ω—É—î:

* –ø—Ä–æ—Å—Ç–æ—Ç—É **Pydantic**,
* —Å–∏–ª—É **SQLAlchemy**.

> –í–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î –æ–ø–∏—Å–∞—Ç–∏ –º–æ–¥–µ–ª—å **–æ–¥–∏–Ω —Ä–∞–∑** —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—ó –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å —ñ –∑–∞–ø–∏—Ç—ñ–≤.

---

### üì¶ 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è SQLModel

```bash
pip install sqlmodel
```

---

### üóÇÔ∏è 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É –∑ –ë–î

```
fastapi_project/
‚îÇ
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ database.db  ‚Üê –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
```

---

### üß± 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ

```python
from sqlmodel import SQLModel, Field
from typing import Optional

class User(SQLModel, table=True):
    id: Optional[int] = Field(default=None, primary_key=True)
    name: str
    age: int
```

> `table=True` ‚Äî —Ü–µ –≤–∫–∞–∑—ñ–≤–∫–∞, —â–æ —Ü–µ —Ç–∞–±–ª–∏—Ü—è –ë–î.
> `id` ‚Äî –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è.

---

### ‚öôÔ∏è 4. –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ SQLite

```python
from sqlmodel import create_engine, Session

sqlite_file_name = "database.db"
sqlite_url = f"sqlite:///{sqlite_file_name}"

engine = create_engine(sqlite_url, echo=True)  # echo=True = –ª–æ–≥ –∑–∞–ø–∏—Ç—ñ–≤
```

---

### üèóÔ∏è 5. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞–±–ª–∏—Ü—å

```python
def create_db():
    SQLModel.metadata.create_all(engine)
```

> –í–∏–∫–ª–∏—á–∏ `create_db()` –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

---

### ‚ûï 6. –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

```python
@app.post("/users/")
def create_user(name: str = Form(...), age: int = Form(...)):
    user = User(name=name, age=age)
    with Session(engine) as session:
        session.add(user)
        session.commit()
        session.refresh(user)
    return user
```

---

### üìã 7. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

```python
from typing import List
from sqlmodel import select

@app.get("/users/", response_model=List[User])
def get_users():
    with Session(engine) as session:
        users = session.exec(select(User)).all()
        return users
```

---

### üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –°—Ç–≤–æ—Ä–∏ –º–æ–¥–µ–ª—å `Book` –∑ –ø–æ–ª—è–º–∏ `id`, `title`, `author`, `pages`.
2. –°—Ç–≤–æ—Ä–∏ –º–∞—Ä—à—Ä—É—Ç POST `/books/`, —è–∫–∏–π –¥–æ–¥–∞—î –∫–Ω–∏–∂–∫—É.
3. –°—Ç–≤–æ—Ä–∏ GET `/books/` –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –≤—Å—ñ—Ö –∫–Ω–∏–∂–æ–∫.

–û—Ç–∂–µ, –≥–æ—Ç—É—î–º–æ—Å—è –∑–∞–Ω—É—Ä–∏—Ç–∏—Å—è —É —Å–≤—ñ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—ñ! ‚ö°

---

## üîπ –ì–ª–∞–≤–∞ 8: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å, Background Tasks —Ç–∞ WebSocket —É FastAPI

---

### üåÄ 1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ FastAPI

FastAPI –ø—ñ–¥—Ç—Ä–∏–º—É—î —ñ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ, —ñ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏.

```python
@app.get("/async")
async def async_endpoint():
    return {"message": "–¶–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç"}
```

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å –¥–æ–∑–≤–æ–ª—è—î –Ω–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä –ø—ñ–¥ —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –¥–æ–≤–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –±–∞–∑–∏ —á–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö API).

---

### ‚è≥ 2. Background Tasks (–§–æ–Ω–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è)

–¶–µ –∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—ñ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –ø—ñ—Å–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É, –Ω–µ –±–ª–æ–∫—É—é—á–∏ –π–æ–≥–æ.

```python
from fastapi import BackgroundTasks

def write_log(message: str):
    with open("log.txt", "a") as f:
        f.write(message + "\n")

@app.post("/send/")
async def send_message(background_tasks: BackgroundTasks, message: str):
    background_tasks.add_task(write_log, message)
    return {"msg": "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ—Ç—Ä–∏–º–∞–Ω–æ"}
```

---

### üîÑ 3. WebSocket ‚Äî –¥–≤–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–µ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

WebSocket –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —á–∞—Ç, –æ–Ω–ª–∞–π–Ω-–≥—Ä—É —Ç–æ—â–æ.

```python
from fastapi import WebSocket

@app.websocket("/ws")
async def websocket_endpoint(websocket: WebSocket):
    await websocket.accept()
    while True:
        data = await websocket.receive_text()
        await websocket.send_text(f"–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ—Ç—Ä–∏–º–∞–Ω–æ: {data}")
```

---

### üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –°—Ç–≤–æ—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç `/wait`, —è–∫–∏–π —ñ–º—ñ—Ç—É—î –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è 5 —Å–µ–∫—É–Ω–¥ (`await asyncio.sleep(5)`).
2. –î–æ–¥–∞–π Background Task, —è–∫–∏–π –∑–∞–ø–∏—Å—É—î —á–∞—Å –≤–∏–∫–ª–∏–∫—É –≤ –ª–æ–≥.
3. –ù–∞–ø–∏—à–∏ –ø—Ä–æ—Å—Ç–∏–π WebSocket —á–∞—Ç, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

–ß—É–¥–æ–≤–æ, –ø–µ—Ä–µ–π–¥–µ–º–æ –¥–æ –æ–¥–Ω–æ–≥–æ –∑ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏—Ö –∞—Å–ø–µ–∫—Ç—ñ–≤ ‚Äî **–±–µ–∑–ø–µ–∫–∞ —ñ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** —É FastAPI üîê

---

## üîπ –ì–ª–∞–≤–∞ 9: –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —ñ –±–µ–∑–ø–µ–∫–∞ (OAuth2 + JWT)

---

### 1. –û—Å–Ω–æ–≤–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

* **OAuth2** ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É.
* **JWT (JSON Web Token)** ‚Äî —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞, —â–æ –º—ñ—Å—Ç–∏—Ç—å –∑–∞–∫–æ–¥–æ–≤–∞–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

---

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫

```bash
pip install python-jose[cryptography] passlib[bcrypt]
```

* `python-jose` ‚Äî –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —ñ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó JWT.
* `passlib[bcrypt]` ‚Äî –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤.

---

### 3. –û—Å–Ω–æ–≤–Ω—ñ –∫—Ä–æ–∫–∏:

#### –∞) –ú–æ–¥–µ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

```python
from pydantic import BaseModel

class User(BaseModel):
    username: str
    hashed_password: str
```

#### –±) –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è

```python
from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

def hash_password(password: str):
    return pwd_context.hash(password)

def verify_password(plain_password, hashed_password):
    return pwd_context.verify(plain_password, hashed_password)
```

#### –≤) –°—Ç–≤–æ—Ä–µ–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω–∞

```python
from datetime import datetime, timedelta
from jose import jwt

SECRET_KEY = "your_secret_key_here"
ALGORITHM = "HS256"
ACCESS_TOKEN_EXPIRE_MINUTES = 30

def create_access_token(data: dict):
    to_encode = data.copy()
    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)
    to_encode.update({"exp": expire})
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
    return encoded_jwt
```

---

### 4. OAuth2PasswordBearer (FastAPI)

```python
from fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm

oauth2_scheme = OAuth2PasswordBearer(tokenUrl="token")

@app.post("/token")
async def login(form_data: OAuth2PasswordRequestForm = Depends()):
    user_dict = fake_users_db.get(form_data.username)
    if not user_dict:
        raise HTTPException(status_code=400, detail="–ù–µ–≤—ñ—Ä–Ω–∏–π –ª–æ–≥—ñ–Ω")
    user = User(**user_dict)
    if not verify_password(form_data.password, user.hashed_password):
        raise HTTPException(status_code=400, detail="–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å")
    access_token = create_access_token(data={"sub": user.username})
    return {"access_token": access_token, "token_type": "bearer"}
```

---

### 5. –ó–∞—Ö–∏—â–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏

```python
from fastapi import Depends

async def get_current_user(token: str = Depends(oauth2_scheme)):
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        username = payload.get("sub")
        if username is None:
            raise HTTPException(status_code=401, detail="–ù–µ–≤—ñ—Ä–Ω–∏–π —Ç–æ–∫–µ–Ω")
        return username
    except jwt.JWTError:
        raise HTTPException(status_code=401, detail="–ù–µ–≤—ñ—Ä–Ω–∏–π —Ç–æ–∫–µ–Ω")

@app.get("/users/me")
async def read_users_me(current_user: str = Depends(get_current_user)):
    return {"username": current_user}
```

---

### üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –†–µ–∞–ª—ñ–∑—É–π –±–∞–∑—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (fake\_users\_db) —É –≤–∏–≥–ª—è–¥—ñ —Å–ª–æ–≤–Ω–∏–∫–∞.
2. –°—Ç–≤–æ—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ö–µ—à—É–≤–∞–Ω–Ω—è–º –ø–∞—Ä–æ–ª—è.
3. –ó–∞—Ö–∏—Å—Ç–∏ –±—É–¥—å-—è–∫–∏–π –º–∞—Ä—à—Ä—É—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç–æ–∫–µ–Ω–∞.

–î–æ–±—Ä–µ, –ø–µ—Ä–µ–π–¥–µ–º–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è FastAPI –¥–æ–¥–∞—Ç–∫—ñ–≤ ‚Äî —Ü–µ –≤–∞–∂–ª–∏–≤–∞ —Å–∫–ª–∞–¥–æ–≤–∞ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏! üß™

---

## üîπ –ì–ª–∞–≤–∞ 10: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è FastAPI –¥–æ–¥–∞—Ç–∫—ñ–≤

---

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è pytest —Ç–∞ httpx

```bash
pip install pytest httpx
```

* **pytest** ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è Python.
* **httpx** ‚Äî –∫–ª—ñ—î–Ω—Ç –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö HTTP-–∑–∞–ø–∏—Ç—ñ–≤.

---

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞

FastAPI –Ω–∞–¥–∞—î `TestClient` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `requests`, —â–æ–± –ª–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ API.

```python
from fastapi.testclient import TestClient
from main import app  # —ñ–º–ø–æ—Ä—Ç—É—î–º–æ –≤–∞—à FastAPI –¥–æ–¥–∞—Ç–æ–∫

client = TestClient(app)
```

---

### 3. –ü—Ä–∏–∫–ª–∞–¥ —Ç–µ—Å—Ç—É –¥–ª—è GET-–∑–∞–ø–∏—Ç—É

```python
def test_read_main():
    response = client.get("/")
    assert response.status_code == 200
    assert response.json() == {"message": "Hello World"}
```

---

### 4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è POST-–∑–∞–ø–∏—Ç—É –∑ —Ñ–æ—Ä–º–æ—é

```python
def test_create_user():
    response = client.post(
        "/users/",
        data={"name": "Alice", "age": 30}
    )
    assert response.status_code == 200
    data = response.json()
    assert data["name"] == "Alice"
    assert data["age"] == 30
    assert "id" in data
```

---

### 5. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (–∑ —Ç–æ–∫–µ–Ω–æ–º)

```python
def test_get_current_user():
    # –°–ø–æ—á–∞—Ç–∫—É –æ—Ç—Ä–∏–º—É—î–º–æ —Ç–æ–∫–µ–Ω
    response = client.post(
        "/token",
        data={"username": "testuser", "password": "testpass"}
    )
    token = response.json()["access_token"]

    headers = {"Authorization": f"Bearer {token}"}
    response = client.get("/users/me", headers=headers)
    assert response.status_code == 200
    assert response.json()["username"] == "testuser"
```

---

### 6. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

–ó–∞–ø—É—Å–∫–∞—î–º–æ –≤—Å—ñ —Ç–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–æ—é —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

```bash
pytest
```

---

### üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –ù–∞–ø–∏—à–∏ —Ç–µ—Å—Ç –¥–ª—è –º–∞—Ä—à—Ä—É—Ç—É `/books/` (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É).
2. –ù–∞–ø–∏—à–∏ —Ç–µ—Å—Ç –Ω–∞ –≤–∏–ø–∞–¥–æ–∫ –Ω–µ–≤—ñ—Ä–Ω–æ–≥–æ –ª–æ–≥—ñ–Ω–∞ (401).
3. –°—Ç–≤–æ—Ä–∏ —Ç–µ—Å—Ç, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —â–æ –ø–æ–ª–µ `age` –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–µ —ñ –º–∞—î –±—É—Ç–∏ —á–∏—Å–ª–æ–º.

–ì–∞—Ä–Ω–æ, —Ç–µ–ø–µ—Ä —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ, —è–∫ —Ä–æ–∑–≥–æ—Ä—Ç–∞—Ç–∏ FastAPI –≤ –ø—Ä–æ–¥–∞–∫—à–Ω ‚Äî —Ü–µ –≤–∞–∂–ª–∏–≤–∏–π –∫—Ä–æ–∫ –¥–ª—è —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤! üöÄ

---

## üîπ –ì–ª–∞–≤–∞ 11: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è FastAPI –¥–æ–¥–∞—Ç–∫—ñ–≤ (Docker, Heroku, AWS)

---

### 1. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑ Docker

---

#### –∞) Dockerfile ‚Äî –æ–ø–∏—Å—É—î, —è–∫ –∑–±–∏—Ä–∞—Ç–∏ –æ–±—Ä–∞–∑

```dockerfile
# –í—ñ–∑—å–º–µ–º–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Python –æ–±—Ä–∞–∑
FROM python:3.11-slim

# –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–±–æ—á—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
WORKDIR /app

# –ö–æ–ø—ñ—é—î–º–æ —Ñ–∞–π–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
COPY requirements.txt .

# –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø—ñ—é—î–º–æ –≤–µ—Å—å –∫–æ–¥
COPY . .

# –ó–∞–ø—É—Å–∫–∞—î–º–æ Uvicorn —Å–µ—Ä–≤–µ—Ä
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

---

#### –±) –°—Ç–≤–æ—Ä–µ–Ω–Ω—è requirements.txt

```bash
pip freeze > requirements.txt
```

---

#### –≤) –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –∑–±—ñ—Ä–∫–∏ —Ç–∞ –∑–∞–ø—É—Å–∫—É

```bash
docker build -t fastapi-app .
docker run -d -p 8000:8000 fastapi-app
```

---

### 2. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Heroku

---

#### –∞) –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª Procfile

```text
web: uvicorn main:app --host=0.0.0.0 --port=${PORT:-5000}
```

---

#### –±) –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –¥–µ–ø–ª–æ—é

```bash
heroku create your-app-name
git push heroku main
heroku ps:scale web=1
heroku open
```

---

### 3. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ AWS (Elastic Beanstalk)

---

* –°—Ç–≤–æ—Ä—ñ—Ç—å `Dockerrun.aws.json` –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ EB CLI.
* –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –≤–∞—à Docker –æ–±—Ä–∞–∑ –∞–±–æ –∫–æ–¥.
* Elastic Beanstalk –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–≥–æ—Ä–Ω–µ –¥–æ–¥–∞—Ç–æ–∫.

---

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è HTTPS —ñ CORS

* –î–ª—è HTTPS –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Nginx –∞–±–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ Let's Encrypt.
* –î–ª—è Cross-Origin Resource Sharing (CORS):

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # –∑–º—ñ–Ω—ñ—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –¥–æ–º–µ–Ω–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

### üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –°—Ç–≤–æ—Ä–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–≤–æ–≥–æ FastAPI –¥–æ–¥–∞—Ç–∫—É.
2. –†–æ–∑–≥–æ—Ä–Ω–∏ –¥–æ–¥–∞—Ç–æ–∫ –Ω–∞ Heroku.
3. –ù–∞–ª–∞—à—Ç—É–π CORS –¥–ª—è —Å–≤–æ–≥–æ API.

–û–∫–µ–π, —Ç–µ–ø–µ—Ä –ø–æ–≥–æ–≤–æ—Ä–∏–º–æ –ø—Ä–æ —Ç–µ, —è–∫ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —Ç–∞ –º–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ FastAPI –¥–æ–¥–∞—Ç–∫–∏, —â–æ–± –≤–æ–Ω–∏ —Å–ø—Ä–∞–≤–ª—è–ª–∏—Å—è –∑ –≤–µ–ª–∏–∫–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º —ñ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. ‚öôÔ∏èüöÄ

---

## üîπ –ì–ª–∞–≤–∞ 12: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —ñ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è FastAPI

---

### 1. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Uvicorn —ñ–∑ Workers (gunicorn)

FastAPI –ø—Ä–∞—Ü—é—î –Ω–∞ Uvicorn, –∞–ª–µ –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ —á–∞—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å –∫—ñ–ª—å–∫–∞ –≤–æ—Ä–∫–µ—Ä—ñ–≤ —á–µ—Ä–µ–∑ Gunicorn.

**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫—É:**

```bash
gunicorn -k uvicorn.workers.UvicornWorker main:app --workers 4 --bind 0.0.0.0:8000
```

* `--workers 4` ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—ñ–≤, —â–æ –æ–±—Ä–æ–±–ª—è—é—Ç—å –∑–∞–ø–∏—Ç–∏.

---

### 2. –ö–µ—à—É–≤–∞–Ω–Ω—è

* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –∑–∞–ø–∏—Ç—ñ–≤, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Redis.
* –ú–æ–∂–Ω–∞ –∫–µ—à—É–≤–∞—Ç–∏ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, —á–∞—Å—Ç—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, –∞–±–æ —Å–µ—Å—ñ—ó.

```python
import aioredis

redis = await aioredis.create_redis_pool("redis://localhost")

@app.get("/data")
async def get_data():
    data = await redis.get("key")
    if not data:
        data = compute_expensive_data()
        await redis.set("key", data)
    return data
```

---

### 3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CDN

* –î–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (–∫–∞—Ä—Ç–∏–Ω–∫–∏, JS, CSS) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Content Delivery Network (CDN) ‚Äî —Ü–µ –∑–º–µ–Ω—à–∏—Ç—å –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

### 4. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

* –†–æ–∑–≥–æ—Ä—Ç–∞–π—Ç–µ –∫—ñ–ª—å–∫–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ –¥–æ–¥–∞—Ç–∫—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Docker Swarm, Kubernetes –∞–±–æ –≤ —Ö–º–∞—Ä—ñ.
* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Load Balancer).

---

### 5. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —ñ –ª–æ–≥—É–≤–∞–Ω–Ω—è

* –Ü–Ω—Ç–µ–≥—Ä—É–π—Ç–µ —Å–µ—Ä–≤—ñ—Å–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É (Prometheus, Grafana, Sentry).
* –õ–æ–≥–∏ –∑–∞–ø–∏—Å—É–π—Ç–µ —É —Ñ–∞–π–ª –∞–±–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å.

---

### 6. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É

* –£–Ω–∏–∫–∞–π—Ç–µ –±–ª–æ–∫—É—é—á–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π —É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ—è—Ö.
* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö.
* –ü—Ä–æ—Ñ—ñ–ª—é–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫ (cProfile, py-spy).

---

### üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–Ω—è

1. –ó–∞–ø—É—Å—Ç–∏ FastAPI –∑ Gunicorn —ñ –∫—ñ–ª—å–∫–æ–º–∞ –≤–æ—Ä–∫–µ—Ä–∞–º–∏.
2. –†–µ–∞–ª—ñ–∑—É–π –∫–µ—à—É–≤–∞–Ω–Ω—è –∑ Redis.
3. –ù–∞–ª–∞—à—Ç—É–π –±–∞–∑–æ–≤–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ –¥–æ–¥–∞—Ç–∫—É.

